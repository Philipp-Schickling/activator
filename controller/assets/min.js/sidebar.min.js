$(window).on("load",function(){function a(a){this.hSidebar=a.height(),this.hScreen=b.height(),this.fits,this.sOffsetSidebarTop,this.sOffsetSidebarBottom,this.scrollDirection,this.lastOffsetWindow,this.fixed,this.fixedTop,this.fixedBottom,this.initSidebarTop,this.initSidebarBottom,this.suppScrollOffset=20,this.toggle=function(){var c=b.scrollTop();if(b.innerHeight()<this.hSidebar+2*this.suppScrollOffset)a.css({position:"fixed",top:this.suppScrollOffset}),this.fixed=!0,this.fixedTop=!0,this.fixedBottom=!1,this.fits=!1,this.sOffsetSidebarTop=c,this.sOffsetSidebarBottom=c+this.hSidebar,this.lastOffsetWindow=c,this.initSidebarTop=c+this.suppScrollOffset,this.initSidebarBottom=c+2*this.suppScrollOffset+this.hSidebar;else{a.scroll().top;a.css({position:"fixed"}),a.animate({top:this.suppScrollOffset}),this.fixed=!0,this.fits=!0}},this.scrollHandler=function(){if(!this.fits){var c=this.sOffsetSidebarTop,d=a.offset().top-this.suppScrollOffset,e=a.offset().top+this.hSidebar+this.suppScrollOffset,f=b.scrollTop(),g=b.scrollTop()+b.innerHeight(),h=b.innerHeight();if(f>c?this.scrollDirection="down":this.scrollDirection="up","up"==this.scrollDirection)if(this.fixedBottom){var i=a.offset().top;a.css("position","absolute"),a.css("top",i),this.fixedBottom=!1}else d>=f&&(a.css("position","fixed"),a.css("top",this.suppScrollOffset),this.fixedTop=!0);if("down"==this.scrollDirection)if(this.fixedTop){var i=a.offset().top;a.css("position","absolute"),a.css("top",i),this.fixedTop=!1}else if(g>=e){var i=a.offset().top;a.css("position","fixed"),a.css("top",-(this.hSidebar-h+this.suppScrollOffset)),this.fixedBottom=!0}this.sOffsetSidebarTop=f,this.sOffsetSidebarBottom=f+this.hSidebar}}}var b=$(window),c=(screen.width,screen.height,$(".wSidebar")),d=$("nav").height(),e=new a(c);b.scrollTop()>d&&e.toggle(),b.on("resize",function(){b.scrollTop()>d&&e.toggle()}),b.on("scroll",function(){b.scrollTop()>d&&(console.log("?"),e.scrollHandler())})});